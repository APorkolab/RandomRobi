<div class="container-fluid">
	<div class="row">
		<button *ngIf="(user$ | async)" routerLink="/login" type="button" class="btn btn-danger mb-2">Sign out</button>
		<button *ngIf="!(user$ | async)" routerLink="/login" type="button" class="btn btn-info mb-2">Sign in</button>
		<button class="btn btn-primary" [routerLink]="'/user/edit/0'">Create</button>
		<button routerLink="/admin" type="button" class="btn btn-dark">Go to Video Page</button>
		<div class="col-md-12">
			<h1>User page of the RandomRobi</h1>


			<div class="row justify-content-center">
				<div class="col-md-6">
					<div class="input-group mb-3">
						<select [(ngModel)]="filterKey" id="tableSearch" class="form-select col-md-3">
							<option value="">Search in every column</option>
							<option *ngFor="let key of columns" [selected]="key.title === filterKey" [value]="key.title">
								{{ key.title }}
							</option>
						</select>
						<input [(ngModel)]="phrase" type="text" class="form-control col-md-9" placeholder="Search in the data...">
					</div>
				</div>
			</div>

			<table class="table table-hover">
				<thead>
					<tr>
						<th>ID</th>
						<th>Username</th>
						<th>Password</th>
						<th>E-mail</th>
						<th>Edit</th>
						<th>Delete</th>
					</tr>
				</thead>

				<tbody *ngIf="users$ | async as users">
					<tr
						*ngFor="let user of users | slice: startSlice:endSlice | filter:phrase:keys[filterKey] | sort:columnKey:sortDir">
						<td>{{ user.id }}</td>
						<td>{{ user.username }}</td>
						<td>{{ user.password }}</td>
						<td>{{ user.email }}</td>
						<td><button class="btn btn-primary" (click)="editUser(user)">Edit</button></td>
						<td><button class="btn btn-danger" (click)="deleteUser(user)">Delete</button></td>
					</tr>
				</tbody>
			</table>

			<div class="pt-2 row">
				<nav aria-label="paginator">
					<ul class="pagination pagination-lg mt-12 justify-content-center">
						<li [className]="page===1 ? 'page-item disabled' : 'page-item'">
							<button class="page-link" (click)="jumptoPage(page - 1)" [disabled]="page===1">
								Previous
							</button>
						</li>
						<li *ngFor="let pageNum of pageList" class="page-item">
							<button [className]="page===pageNum ? 'page-link active' : 'page-link'" (click)=" jumptoPage(pageNum)">
								{{ pageNum }}
							</button>
						</li>
						<li [className]="page===pageList.length ? 'page-item disabled' : 'page-item'">
							<button class="page-link" (click)="jumptoPage(page + 1)" [disabled]="page===pageList.length">
								Next
							</button>
						</li>
					</ul>
				</nav>